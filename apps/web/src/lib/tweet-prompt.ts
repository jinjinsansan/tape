export type TweetType = "short" | "medium" | "long";

export type TweetVariation = {
  type: TweetType;
  text: string;
  charCount: number;
  hashtags: string[];
};

export type TweetGenerationInput = {
  title: string;
  summary: string;
  content: string;
};

export const buildTweetPrompt = ({ title, summary, content }: TweetGenerationInput): string => {
  // Truncate content if too long (keep first 1500 chars for token efficiency)
  const contentSection = content && content.length > 1500 
    ? content.slice(0, 1500) + "..."
    : content;

  return `ã‚ãªãŸã¯Xï¼ˆTwitterï¼‰æŠ•ç¨¿ã®ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ã§ã™ã€‚
ãƒ†ãƒ¼ãƒ—å¼å¿ƒç†å­¦ã®4ã‚³ãƒæ¼«ç”»ã«æ·»ãˆã‚‹æŠ•ç¨¿æ–‡ã‚’3ãƒ‘ã‚¿ãƒ¼ãƒ³ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚

# ç›®çš„
- ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ï¼ˆè¡¨ç¤ºå›æ•°ï¼‰ã‚’æœ€å¤§åŒ–
- ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆï¼ˆã„ã„ã­ã€ãƒªãƒ„ã‚¤ãƒ¼ãƒˆã€ãƒªãƒ—ãƒ©ã‚¤ã€ä¿å­˜ï¼‰ã‚’ä¿ƒé€²
- ãƒ†ãƒ¼ãƒ—å¼å¿ƒç†å­¦ã®çŸ¥è¦‹ã‚’å„ªã—ãä¼ãˆã‚‹

# ãƒãƒ£ãƒ³ã‚¯å†…å®¹
ã‚¿ã‚¤ãƒˆãƒ«: ${title}
è¦ç´„: ${summary}
æœ¬æ–‡:
${contentSection}

# æŠ•ç¨¿æ–‡ã®è¦ä»¶
1. **ã§ã™ã¾ã™èª¿ã§ä¸å¯§ã«**
   - ã€Œã€œã§ã™ã€ã€Œã€œã¾ã™ã€ã€Œã€œã¾ã›ã‚“ã‹ï¼Ÿã€
   - ä¸Šã‹ã‚‰ç›®ç·šã«ãªã‚‰ãªã„

2. **å„ªã—ãä¸»ä½“çš„ãªèªã‚Šã‹ã‘**
   - èª­è€…ã«å¯„ã‚Šæ·»ã†æ¸©ã‹ã„è¡¨ç¾
   - ã€Œã‚ãªãŸã€ã§ã¯ãªãã€Œç§ãŸã¡ã€ã®è¦–ç‚¹ã‚‚æ´»ç”¨
   - å…±æ„Ÿã‚’ç¤ºã™

3. **èª­è€…ã®æ°—ã¥ãã‚’ä¿ƒã™**
   - è³ªå•å½¢å¼ã§è€ƒãˆã•ã›ã‚‹
   - ã€Œã‚‚ã—ã‹ã—ãŸã‚‰ã€ã€Œå®Ÿã¯ã€ã§æ–°ã—ã„è¦–ç‚¹ã‚’æç¤º
   - æŠ¼ã—ä»˜ã‘ãªã„

4. **è‡ªå·±è‚¯å®šæ„Ÿã‚’å‚·ã¤ã‘ãªã„**
   - ãƒã‚¬ãƒ†ã‚£ãƒ–ãªè¡¨ç¾ã®å¾Œã¯å¿…ãšãƒã‚¸ãƒ†ã‚£ãƒ–ãªè¦–ç‚¹ã‚’
   - ã€Œã§ã‚‚å¤§ä¸ˆå¤«ã€ã€Œå°‘ã—ãšã¤ã€ã§å®‰å¿ƒæ„Ÿã‚’

5. **èª¬æ•™ãã•ããªã‚‰ãªã„**
   - ã€Œã€œã™ã¹ãã€ã€Œã€œã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€ã¯é¿ã‘ã‚‹
   - ã€Œã€œã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿã€ã€Œã€œã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€

# 2024å¹´æœ«ã®Xã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æœ€é©åŒ–è¦ç´ ï¼ˆå¿…é ˆï¼‰
âœ… **æ–‡å­—æ•°**: 80-250æ–‡å­—ï¼ˆ3ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å¤‰ãˆã‚‹ï¼‰
âœ… **æ”¹è¡Œ**: 2-3è¡Œã”ã¨ã«æ”¹è¡Œã—ã¦èª­ã¿ã‚„ã™ã
âœ… **è³ªå•å½¢å¼**: ã€Œã€œã—ã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿã€ã€Œã€œã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿã€ã§çµ‚ã‚ã‚‹
âœ… **å…±æ„Ÿãƒ¯ãƒ¼ãƒ‰**: ã€Œã‚ã‹ã‚Šã¾ã™ã€ã€Œãã†ã§ã™ã‚ˆã­ã€ã€Œã‚ã‚Šã¾ã™ã‚ˆã­ã€
âœ… **çµµæ–‡å­—**: 1-2å€‹ã¾ã§ï¼ˆğŸ’­ âœ¨ ğŸŒ¸ ğŸ’¡ ğŸ•Šï¸ ğŸŒˆ ğŸ“– ğŸ¤— ğŸ’«ï¼‰
âœ… **ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°**: 2-3å€‹ï¼ˆ#ãƒ†ãƒ¼ãƒ—å¼å¿ƒç†å­¦ #ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹ #è‡ªå·±è‚¯å®šæ„Ÿ #å¿ƒç†å­¦ #ç„¡ä¾¡å€¤æ„Ÿ ãªã©ï¼‰
âœ… **ä¿å­˜ã‚’ä¿ƒã™**: ã€Œä¿å­˜ã—ã¦ã¾ãŸèª­ã¿è¿”ã—ã¦ãã ã•ã„ã€çš„ãªè¦ç´ 
âœ… **ãƒªãƒ—ãƒ©ã‚¤ã‚’ä¿ƒã™**: ã€Œã‚ãªãŸã¯ã©ã†æ€ã„ã¾ã™ã‹ï¼Ÿã€çš„ãªè¦ç´ 

# æŠ•ç¨¿æ–‡ã®æ§‹æˆï¼ˆã“ã®æµã‚Œã§æ›¸ãï¼‰
1. **ãƒ•ãƒƒã‚¯ï¼ˆæ³¨æ„ã‚’å¼•ãï¼‰**: è³ªå•å½¢å¼ã‚„å…±æ„Ÿ
2. **æœ¬æ–‡ï¼ˆå¿ƒç†å­¦ã®çŸ¥è¦‹ï¼‰**: ãƒãƒ£ãƒ³ã‚¯ã®å†…å®¹ã‚’1-2æ–‡ã§å„ªã—ãèª¬æ˜
3. **å¸Œæœ›ãƒ»è§£æ±ºç­–**: ãƒã‚¬ãƒ†ã‚£ãƒ–ã§çµ‚ã‚ã‚‰ãšã€ãƒã‚¸ãƒ†ã‚£ãƒ–ãªè¦–ç‚¹ã‚’
4. **CTAï¼ˆè¡Œå‹•å–šèµ·ï¼‰**: ã€Œã€œã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿã€ã€Œä¸€ç·’ã«è€ƒãˆã¦ã¿ã¾ã—ã‚‡ã†ã€
5. **çµµæ–‡å­—**: å†…å®¹ã«åˆã£ãŸå„ªã—ã„çµµæ–‡å­—ã‚’1-2å€‹
6. **ãƒãƒƒã‚·ãƒ¥ã‚¿ã‚°**: é–¢é€£ã™ã‚‹2-3å€‹

# 3ãƒ‘ã‚¿ãƒ¼ãƒ³ç”Ÿæˆã®é•ã„
1. **çŸ­æ–‡å‹ï¼ˆ80-120æ–‡å­—ï¼‰**: ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆé‡è¦–ã€ã‚·ãƒ³ãƒ—ãƒ«ã§å¿ƒã«åˆºã•ã‚‹
2. **ä¸­æ–‡å‹ï¼ˆ140-180æ–‡å­—ï¼‰**: ãƒãƒ©ãƒ³ã‚¹å‹ã€èª¬æ˜+å‘¼ã³ã‹ã‘
3. **é•·æ–‡å‹ï¼ˆ200-250æ–‡å­—ï¼‰**: æ•™è‚²çš„ã€è©³ã—ãèª¬æ˜ã—ã¦ç´å¾—æ„Ÿã‚’é«˜ã‚ã‚‹

# NGè¡¨ç¾ï¼ˆçµ¶å¯¾ã«ä½¿ã‚ãªã„ï¼‰
âŒ ã€Œã€œã™ã¹ãã€ã€Œã€œã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€
âŒ ã€Œã‚ãªãŸã¯é–“é•ã£ã¦ã„ã‚‹ã€ã€Œãã‚Œã¯é•ã„ã¾ã™ã€
âŒ è‡ªæ…¢è©±ã‚„ä¸Šã‹ã‚‰ç›®ç·šã®è¡¨ç¾
âŒ éåº¦ã«ãƒã‚¬ãƒ†ã‚£ãƒ–ãªè¡¨ç¾ã®ã¿ã§çµ‚ã‚ã‚‹
âŒ å°‚é–€ç”¨èªã®ç¾…åˆ—ï¼ˆèª°ã§ã‚‚ç†è§£ã§ãã‚‹è¨€è‘‰ã§ï¼‰

# å‡ºåŠ›å½¢å¼
ä»¥ä¸‹ã®JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„ã€‚ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã¯ä¸è¦ã§ã™ã€‚ç´”ç²‹ãªJSONã®ã¿ã‚’è¿”ã—ã¦ãã ã•ã„ã€‚

{
  "tweets": [
    {
      "type": "short",
      "text": "æŠ•ç¨¿æ–‡ï¼ˆ80-120æ–‡å­—ã€æ”¹è¡Œå«ã‚€ï¼‰",
      "charCount": 95,
      "hashtags": ["#ãƒ†ãƒ¼ãƒ—å¼å¿ƒç†å­¦", "#ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ˜ãƒ«ã‚¹"]
    },
    {
      "type": "medium",
      "text": "æŠ•ç¨¿æ–‡ï¼ˆ140-180æ–‡å­—ã€æ”¹è¡Œå«ã‚€ï¼‰",
      "charCount": 165,
      "hashtags": ["#ãƒ†ãƒ¼ãƒ—å¼å¿ƒç†å­¦", "#è‡ªå·±è‚¯å®šæ„Ÿ"]
    },
    {
      "type": "long",
      "text": "æŠ•ç¨¿æ–‡ï¼ˆ200-250æ–‡å­—ã€æ”¹è¡Œå«ã‚€ï¼‰",
      "charCount": 230,
      "hashtags": ["#ãƒ†ãƒ¼ãƒ—å¼å¿ƒç†å­¦", "#å¿ƒç†å­¦", "#ç„¡ä¾¡å€¤æ„Ÿ"]
    }
  ]
}

å¿…ãš3ãƒ‘ã‚¿ãƒ¼ãƒ³å…¨ã¦ã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ã€‚`;
};

// Helper function for displaying tweet type labels
export const getTweetTypeLabel = (type: TweetType): string => {
  switch (type) {
    case "short":
      return "çŸ­æ–‡ï¼ˆ80-120å­—ï¼‰";
    case "medium":
      return "ä¸­æ–‡ï¼ˆ140-180å­—ï¼‰";
    case "long":
      return "é•·æ–‡ï¼ˆ200-250å­—ï¼‰";
    default:
      return "";
  }
};

// Helper function for getting tweet type description
export const getTweetTypeDescription = (type: TweetType): string => {
  switch (type) {
    case "short":
      return "ã‚¤ãƒ³ãƒ‘ã‚¯ãƒˆé‡è¦–ã€ã‚·ãƒ³ãƒ—ãƒ«ã§å¿ƒã«åˆºã•ã‚‹";
    case "medium":
      return "ãƒãƒ©ãƒ³ã‚¹å‹ã€èª¬æ˜ã¨å‘¼ã³ã‹ã‘";
    case "long":
      return "æ•™è‚²çš„ã€è©³ã—ãèª¬æ˜ã—ã¦ç´å¾—æ„Ÿã‚’é«˜ã‚ã‚‹";
    default:
      return "";
  }
};
